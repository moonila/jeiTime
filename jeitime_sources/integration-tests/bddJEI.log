CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
INSERT INTO ROLES VALUES('chef_de_projet')
INSERT INTO ROLES VALUES('collaborateur')
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
SET AUTOCOMMIT FALSE
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO NOMTACHE VALUES(2,'type_tache2',1)
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO TACHE VALUES(2,0.0E0,FALSE,0,0.0E0,2,1)
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
DELETE FROM TACHE WHERE IDTACHE=2
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=2
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO CLIENTPART VALUES(1,'','entreprise_test','','')
COMMIT
INSERT INTO CONTRAT VALUES(1,1,0)
COMMIT
DELETE FROM CONTRAT WHERE IDCLIENTPART=1 AND IDPROJET=1
COMMIT
DELETE FROM CLIENTPART WHERE IDCLIENTPART=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,'2010-07-07 00:00:00.000000000','projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO COLLABORATEUR VALUES(2,5.0E0,0,'login',10.0E0,7.0E0,0.0E0,5.0E0,0.0E0,100.0E0,2.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',80.0E0,3,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
INSERT INTO COLLABORATEUR VALUES(2,5.0E0,0,'login',10.0E0,7.0E0,0.0E0,5.0E0,0.0E0,100.0E0,2.0E0,0.0E0,'nom_coll2','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',80.0E0,3,NULL)
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,'2010-07-07 00:00:00.000000000','projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO NOMTACHE VALUES(2,'type_tache2',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO COLLABORATEUR VALUES(3,0.0E0,0,'login2',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll2','c1572d05424d0ecb2a65ec6a82aeacbf','prenom_coll2',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(3,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO TACHE VALUES(2,0.0E0,FALSE,0,0.0E0,2,1)
COMMIT
INSERT INTO AFFECTER VALUES(3,1,'2011-09-21 16:53:57.000000000',NULL)
COMMIT
INSERT INTO AFFECTER VALUES(3,2,'2011-09-21 16:53:58.000000000',NULL)
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=3 AND IDTACHE=1
DELETE FROM TACHE WHERE IDTACHE=1
DELETE FROM AFFECTER WHERE IDCOLL=3 AND IDTACHE=2
DELETE FROM TACHE WHERE IDTACHE=2
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=3 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=3
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=2
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:54:11.000000000',NULL)
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,'2010-07-07 00:00:00.000000000','projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:54:23.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-05 00:00:00.000000000',2,1,'',4.0E0)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-07 00:00:00.000000000',2,1,'',2.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-05 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-07 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:54:39.000000000',NULL)
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO THEMATIQUE VALUES(1,'test_th')
COMMIT
DELETE FROM THEMATIQUE WHERE IDTHEMATIQUE=1
INSERT INTO THEMATIQUE VALUES(1,'test_th2')
COMMIT
DELETE FROM THEMATIQUE WHERE IDTHEMATIQUE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
INSERT INTO TYPEPROJET VALUES(1,'type_projet_test2')
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'Recherche')
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe1')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'analyse',1)
COMMIT
INSERT INTO NOMTACHE VALUES(2,'conception',1)
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2011-01-01 00:00:00.000000000',NULL,NULL,'test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,TRUE,0,0.0E0,1,1)
COMMIT
INSERT INTO TACHE VALUES(2,0.0E0,FALSE,0,0.0E0,2,1)
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'lala','d56b699830e77ba53855679cb1d252da','lala',0.0E0,3,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:55:06.000000000',NULL)
COMMIT
INSERT INTO AFFECTER VALUES(2,2,'2011-09-21 16:55:06.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2011-01-19 00:00:00.000000000',2,1,'',2.0E0)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2011-01-20 00:00:00.000000000',2,1,'',5.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2011-01-20 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
INSERT INTO LIENTACHUTIL VALUES('2011-01-20 00:00:00.000000000',2,1,'',8.0E0)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2011-01-19 00:00:00.000000000',2,2,'',7.0E0)
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:55:19.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-05 00:00:00.000000000',2,1,'',5.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-05 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO DOMAINE VALUES(1,'dom_test')
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,1,NULL,NULL,1)
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM DOMAINE WHERE IDDOMAINE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO DOMAINE VALUES(1,'dom_test')
COMMIT
INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,1,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:55:55.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-05 00:00:00.000000000',2,1,'',5.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-05 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
DELETE FROM DOMAINE WHERE IDDOMAINE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO EQUIPE VALUES(1,'fction_test','equipe_test')
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
INSERT INTO EQUIPE VALUES(1,'fction_test','equipe_test2')
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:56:17.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-05 00:00:00.000000000',2,1,'',5.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-05 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO CLIENTPART VALUES(1,'test','entreprise_test','contact_test','service_test')
COMMIT
DELETE FROM CLIENTPART WHERE IDCLIENTPART=1
INSERT INTO CLIENTPART VALUES(1,'test','entreprise_test2','contact_test','service_test')
COMMIT
DELETE FROM CLIENTPART WHERE IDCLIENTPART=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO THEMATIQUE VALUES(1,'test_th')
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,1,1)
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM THEMATIQUE WHERE IDTHEMATIQUE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,'2010-07-07 00:00:00.000000000','projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
INSERT INTO AFFECTER VALUES(2,1,'2011-09-21 16:56:48.000000000',NULL)
COMMIT
INSERT INTO LIENTACHUTIL VALUES('2010-07-05 00:00:00.000000000',2,1,'',5.0E0)
COMMIT
DELETE FROM LIENTACHUTIL WHERE DATE='2010-07-05 00:00:00.000000000' AND IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM AFFECTER WHERE IDCOLL=2 AND IDTACHE=1
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
DELETE FROM EQUIPE WHERE IDEQ=1
COMMIT
DELETE FROM TACHE WHERE IDTACHE=1
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
COMMIT
DELETE FROM TYPEPROJET WHERE IDTYPEPROJET=1
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO COLLEGE VALUES(1,FALSE,FALSE,FALSE,'0.5/5/3.2/',0.0E0,10.0E0,2.0E0,5.0E0,0.0E0,0.0E0,3.0E0,0.0E0,0,0,'college_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,10.0E0,2.0E0,5.0E0,0.0E0,0.0E0,3.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll',0.0E0,3,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO APPARTIENTCOLLEGE VALUES('2011-09-21 16:57:01.000000000',2,1)
COMMIT
DELETE FROM APPARTIENTCOLLEGE WHERE DATEC='2011-09-21 16:57:01.000000000' AND IDCOLL=2 AND IDCOLLEGE=1
COMMIT
DELETE FROM COLLEGE WHERE IDCOLLEGE=1
COMMIT
DELETE FROM ROLECOLLAB WHERE IDCOLL=2 AND ROLES='collaborateur'
COMMIT
DELETE FROM COLLABORATEUR WHERE IDCOLL=2
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO COLLEGE VALUES(1,FALSE,FALSE,FALSE,'',0.0E0,8.0E0,0.0E0,5.0E0,0.0E0,0.0E0,3.0E0,0.0E0,0,0,'college_test')
COMMIT
DELETE FROM COLLEGE WHERE IDCOLLEGE=1
INSERT INTO COLLEGE VALUES(1,FALSE,FALSE,FALSE,NULL,0.0E0,8.0E0,0.0E0,5.0E0,0.0E0,0.0E0,3.0E0,0.0E0,0,0,'college_test2')
COMMIT
DELETE FROM COLLEGE WHERE IDCOLLEGE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
INSERT INTO TYPETACHE VALUES(1,'groupe_tache2')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'test_tache',1)
COMMIT
DELETE FROM NOMTACHE WHERE IDNOMTACHE=1
COMMIT
DELETE FROM TYPETACHE WHERE IDTYPETACHE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO DOMAINE VALUES(1,'dom_test')
COMMIT
DELETE FROM DOMAINE WHERE IDDOMAINE=1
INSERT INTO DOMAINE VALUES(1,'dom_test2')
COMMIT
DELETE FROM DOMAINE WHERE IDDOMAINE=1
COMMIT
/*C2*/SET AUTOCOMMIT TRUE
alter table AFFECTER drop constraint FK527FE282F4AB661B
alter table AFFECTER drop constraint FK527FE282E35C0803
alter table APPARTIENTCOLLEGE drop constraint FK45FC61738C679340
alter table APPARTIENTCOLLEGE drop constraint FK45FC6173E35C0803
alter table COLLABORATEUR drop constraint FKD5F203DFF9C238D7
alter table CONTRAT drop constraint FK6382EF9383393F65
alter table CONTRAT drop constraint FK6382EF93E4F683C5
alter table LIENTACHUTIL drop constraint FKBD645B7AF4AB661B
alter table LIENTACHUTIL drop constraint FKBD645B7AE35C0803
alter table NOMTACHE drop constraint FK81CB63C720F7457B
alter table PROJET drop constraint FK8D2C40CCE3AC0964
alter table PROJET drop constraint FK8D2C40CC42269065
alter table PROJET drop constraint FK8D2C40CCAE3B98A5
alter table PROJET drop constraint FK8D2C40CCB8A8D91B
alter table PROJET_PROJET drop constraint FKCA97BF9F8D0243DD
alter table PROJET_PROJET drop constraint FKCA97BF9FD8FE0DD8
alter table ROLECOLLAB drop constraint FK905D6C032C362FCF
alter table ROLECOLLAB drop constraint FK905D6C03E35C0803
alter table TACHE drop constraint FK4BE46F3204DA605
alter table TACHE drop constraint FK4BE46F3E4F683C5
drop table AFFECTER if exists
drop table APPARTIENTCOLLEGE if exists
drop table CLIENTPART if exists
drop table COLLABORATEUR if exists
drop table COLLEGE if exists
drop table CONTRAT if exists
drop table DOMAINE if exists
drop table EQUIPE if exists
drop table LIENTACHUTIL if exists
drop table NOMTACHE if exists
drop table PROJET if exists
drop table PROJET_PROJET if exists
drop table ROLECOLLAB if exists
drop table ROLES if exists
drop table TACHE if exists
drop table THEMATIQUE if exists
drop table TYPEPROJET if exists
drop table TYPETACHE if exists
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
create table AFFECTER (IDCOLL integer not null, IDTACHE integer not null, DATEDEBUT timestamp not null, DATEFIN timestamp, primary key (IDCOLL, IDTACHE))
create table APPARTIENTCOLLEGE (DATEC timestamp not null, IDCOLL integer not null, IDCOLLEGE integer not null, primary key (DATEC, IDCOLL, IDCOLLEGE))
create table CLIENTPART (IDCLIENTPART integer generated by default as identity (start with 1), COMMENTAIRE varchar(255), NOMETP varchar(255) not null, NOMCONTACT varchar(255), NOMSERVICE varchar(255), primary key (IDCLIENTPART), unique (IDCLIENTPART))
create table COLLABORATEUR (IDCOLL integer generated by default as identity (start with 1), CHARGEANN float not null, CONTRAT integer not null, LOGIN varchar(255) not null, NBHEURANN float not null, NBHEUREHEB float not null, NBHEURJEUDI float not null, NBHEURLUNDI float not null, NBHEURMARDI float not null, NBHEUREMEN float not null, NBHEURMERCREDI float not null, NBHEURVENDREDI float not null, NOMCOLL varchar(20) not null, PASSWORD varchar(255) not null, PRENOMCOLL varchar(20) not null, SALAIRANN float not null, STATUT integer not null, IDEQ integer, primary key (IDCOLL), unique (LOGIN), unique (IDCOLL))
create table COLLEGE (IDCOLLEGE integer generated by default as identity (start with 1), ALERTANN bit not null, ALERTHEB bit not null, ALERTMOI bit not null, LISTSAISIE varchar(255), NBHEUREANN float not null, NBHEURHEBDO float not null, NBHEURJEU float not null, NBHEURLUN float not null, NBHEURMAR float not null, NBHEURMENS float not null, NBHEURMERC float not null, NBHEURVEN float not null, NBJOURCONGE integer not null, NBJOURRTT integer not null, NOMCOLLEGE varchar(255) not null, primary key (IDCOLLEGE), unique (IDCOLLEGE))
create table CONTRAT (IDCLIENTPART integer not null, IDPROJET integer not null, TYPE integer not null, primary key (IDCLIENTPART, IDPROJET))
create table DOMAINE (IDDOMAINE integer generated by default as identity (start with 1), NOMDOMAINE varchar(255) not null, primary key (IDDOMAINE), unique (IDDOMAINE))
create table EQUIPE (IDEQ integer generated by default as identity (start with 1), FCTEQ varchar(255), NOMEQ varchar(255) not null, primary key (IDEQ), unique (IDEQ))
create table LIENTACHUTIL (DATE timestamp not null, IDCOLL integer not null, IDTACHE integer not null, COMMENTAIRE varchar(255), NBHEURE float not null, primary key (DATE, IDCOLL, IDTACHE))
create table NOMTACHE (IDNOMTACHE integer generated by default as identity (start with 1), NOMTACHE varchar(255) not null, IDTYPETACHE integer not null, primary key (IDNOMTACHE), unique (IDNOMTACHE))
create table PROJET (IDPROJET integer generated by default as identity (start with 1), BUDGET float, DATECLOTURE timestamp, DATEDEBUT timestamp not null, DATEFERMETURE timestamp, DATEFIN timestamp, NOMPROJET varchar(255) not null, TPSPREVU float, IDDOMAINE integer, SOUSPROJET integer, IDTHEMATIQUE integer, IDTYPEPROJET integer not null, primary key (IDPROJET), unique (IDPROJET))
create table PROJET_PROJET (PROJET_IDPROJET integer not null, projets_IDPROJET integer not null, primary key (PROJET_IDPROJET, projets_IDPROJET), unique (projets_IDPROJET))
create table ROLECOLLAB (IDCOLL integer not null, ROLES varchar(255) not null, primary key (IDCOLL, ROLES))
create table ROLES (ROLES varchar(255) not null, primary key (ROLES))
create table TACHE (IDTACHE integer generated by default as identity (start with 1), BUDGETTACHE float, ELIGIBLE bit, PRIORITE integer, TPSTACHE float, IDNOMTACHE integer not null, IDPROJET integer, primary key (IDTACHE), unique (IDTACHE))
create table THEMATIQUE (IDTHEMATIQUE integer generated by default as identity (start with 1), NOMTHEMATIQUE varchar(255) not null, primary key (IDTHEMATIQUE), unique (IDTHEMATIQUE))
create table TYPEPROJET (IDTYPEPROJET integer generated by default as identity (start with 1), NOMTYPEPROJET varchar(255) not null, primary key (IDTYPEPROJET), unique (IDTYPEPROJET))
create table TYPETACHE (IDTYPETACHE integer generated by default as identity (start with 1), NOMTYPETACHE varchar(255) not null, primary key (IDTYPETACHE), unique (IDTYPETACHE))
alter table AFFECTER add constraint FK527FE282F4AB661B foreign key (idTache) references TACHE
alter table AFFECTER add constraint FK527FE282E35C0803 foreign key (idColl) references COLLABORATEUR
alter table APPARTIENTCOLLEGE add constraint FK45FC61738C679340 foreign key (idCollege) references COLLEGE
alter table APPARTIENTCOLLEGE add constraint FK45FC6173E35C0803 foreign key (idColl) references COLLABORATEUR
alter table COLLABORATEUR add constraint FKD5F203DFF9C238D7 foreign key (IDEQ) references EQUIPE
alter table CONTRAT add constraint FK6382EF9383393F65 foreign key (idClientPart) references CLIENTPART
alter table CONTRAT add constraint FK6382EF93E4F683C5 foreign key (idProjet) references PROJET
alter table LIENTACHUTIL add constraint FKBD645B7AF4AB661B foreign key (idTache) references TACHE
alter table LIENTACHUTIL add constraint FKBD645B7AE35C0803 foreign key (idColl) references COLLABORATEUR
alter table NOMTACHE add constraint FK81CB63C720F7457B foreign key (IDTYPETACHE) references TYPETACHE
alter table PROJET add constraint FK8D2C40CCE3AC0964 foreign key (SOUSPROJET) references PROJET
alter table PROJET add constraint FK8D2C40CC42269065 foreign key (IDTYPEPROJET) references TYPEPROJET
alter table PROJET add constraint FK8D2C40CCAE3B98A5 foreign key (IDTHEMATIQUE) references THEMATIQUE
alter table PROJET add constraint FK8D2C40CCB8A8D91B foreign key (IDDOMAINE) references DOMAINE
alter table PROJET_PROJET add constraint FKCA97BF9F8D0243DD foreign key (projets_IDPROJET) references PROJET
alter table PROJET_PROJET add constraint FKCA97BF9FD8FE0DD8 foreign key (PROJET_IDPROJET) references PROJET
alter table ROLECOLLAB add constraint FK905D6C032C362FCF foreign key (ROLES) references ROLES
alter table ROLECOLLAB add constraint FK905D6C03E35C0803 foreign key (IDCOLL) references COLLABORATEUR
alter table TACHE add constraint FK4BE46F3204DA605 foreign key (IDNOMTACHE) references NOMTACHE
alter table TACHE add constraint FK4BE46F3E4F683C5 foreign key (IDPROJET) references PROJET
SET AUTOCOMMIT FALSE
INSERT INTO ROLES VALUES('administrateur')
COMMIT
INSERT INTO ROLES VALUES('collaborateur')
COMMIT
INSERT INTO ROLES VALUES('chef_de_projet')
COMMIT
INSERT INTO ROLES VALUES('gestionnaire')
COMMIT
INSERT INTO COLLABORATEUR VALUES(1,0.0E0,0,'admin',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'admin','21232f297a57a5a743894a0e4a801fc3','admin',0.0E0,0,NULL)
COMMIT
INSERT INTO ROLECOLLAB VALUES(1,'administrateur')
COMMIT
/*C1*/INSERT INTO TYPEPROJET VALUES(1,'type_projet_test')
COMMIT
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,NULL,1)
COMMIT
INSERT INTO TYPETACHE VALUES(1,'groupe_tache')
COMMIT
INSERT INTO NOMTACHE VALUES(1,'type_tache',1)
COMMIT
INSERT INTO EQUIPE VALUES(1,'','equipe_test')
COMMIT
INSERT INTO COLLABORATEUR VALUES(2,0.0E0,0,'login',0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,0.0E0,'nom_coll','1a1dc91c907325c69271ddf0c944bc72','prenom_coll2',0.0E0,3,1)
COMMIT
INSERT INTO ROLECOLLAB VALUES(2,'collaborateur')
COMMIT
INSERT INTO THEMATIQUE VALUES(1,'test_th')
COMMIT
DELETE FROM PROJET WHERE IDPROJET=1
INSERT INTO PROJET VALUES(1,0.0E0,NULL,'2010-07-05 00:00:00.000000000',NULL,NULL,'projet_test',0.0E0,NULL,NULL,1,1)
COMMIT
INSERT INTO TACHE VALUES(1,0.0E0,FALSE,0,0.0E0,1,1)
COMMIT
